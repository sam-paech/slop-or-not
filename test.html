<!DOCTYPE html>
<html>
<head>
  <title>Contrast Detector Test</title>
  <meta charset="utf-8">
</head>
<body>
  <h1>Contrast Detector Test</h1>
  <pre id="output">Loading...</pre>

<script type="module">
import { scoreText } from './js/contrast-detector.js';
import { initPosTagger } from './js/pos-tagger.js';

const output = document.getElementById('output');

async function test() {
  try {
    output.textContent = 'Initializing POS tagger...\n';
    await initPosTagger();

    const testCases = [
      'The silence wasn\'t empty. It wasn\'t absence; it was pressure.',
      'The fish weren\'t just dyingâ€”they were speaking.',
      'It\'s not just code. It\'s art.',
      '"The sea doesn\'t react. It whispers."',
      'They\'re not just there. They\'re listening.',
    ];

    output.textContent += '\nRunning tests...\n\n';

    for (const text of testCases) {
      const result = scoreText(text);
      output.textContent += `Text: "${text}"\n`;
      output.textContent += `Hits: ${result.hits}, Rate: ${result.rate_per_1k.toFixed(2)}\n`;
      if (result.matches.length > 0) {
        result.matches.forEach(m => {
          output.textContent += `  - ${m.pattern_name}: "${m.match_text}"\n`;
        });
      }
      output.textContent += '\n';
    }

    output.textContent += 'Tests complete!';
  } catch (e) {
    output.textContent += '\nError: ' + e.message + '\n' + e.stack;
  }
}

test();
</script>
</body>
</html>
